import: https://raw.githubusercontent.com/tangrams/zinc-style/gh-pages/zinc-style.yaml

# This style highlights unnamed features of the selected types in red.
# Search for "nameless" to find the featured layer,
# The basemap is Zinc, a light gray style optimized for data visualization overlays.  
# Give OpenStreetMap data a professional basemap skin using the Tangram graphics  
# library and Mapzen's versatile Vector Tiles. 
# Please use and adapt the open source scene file in your own projects!
#
# Zinc Authors: Nathaniel V. Kelso, Geraldine Sarmiento

cameras:
    camera1:
        type: perspective
        position: [-122.444683, 38.240533, 13] # lon/lat for Sonoma, CA at zoom 13

labels-global:
    - &icon_visible_populated_places  false
    - &text_visible_building          false
    - &text_visible_address           false
    - &label_visible_poi_landuse_e    false
    - &text_visible_poi_landuse_e     false
    - &text_visible_shields           false
    - &text_visible_exits             false

sources:
    osm:
        url:  //vector.mapzen.com/osm/all/{z}/{x}/{y}.topojson?api_key=vector-tiles-7Ea5SpY

layers:
    mz_route_line:
        visible: false
    # Special overlay for Targeted Editing seris
    airports:
        data: { source: osm, layer: [pois,landuse,buildings] }
        filter: 
            all:
                - kind: [aerodrome]
            any:
                - area: false
                - area: true
                  all:
                      - $geometry: point
                      - kind: true
        draw:
            icons:
                size: [[13, 14px], [16, 16px], [19, 20px]]
                sprite: airport
                interactive: true
                order: 1000
                color: white
                visible: false
                priority: 3
            text:
                interactive: false
                move_into_tile: true
                priority: 4
                font:
                    family: Helvetica
                    weight: 500
                    style: italic
                    fill: '#8c50c4'
                    size: 12px
                    stroke: { color: '#cdbbd7', width: 2 }
        matched:
            filter:
                area: false
            draw:
                icons:
                    sprite: airport
                    color: aqua
                    visible: true
                    priority: 1
                text:
                    offset: [[13, [0, 6px]], [16, [0, 8px]], [18, [0, 10px]]] # offset tracks alongside icon size (half icon height)
                    priority: 2
                    anchor: bottom
                    font:
                        fill: black
                        stroke: { color: '#00ffff', width: 4 }
    aerodrome-landuse-aois:
        data: { source: osm, layer: [landuse] }
        filter:
            any:
                - kind: [aerodrome,runway,apron]
        draw:
            polygons:
                color: '#cbbbd7'
                order: 215
    runway-landuse-aois-good:
        data: { source: osm, layer: [landuse] }
        filter:
            any:
                - kind: [runway]   #apron
        draw:
            polygons:
                color: '#cbbbd7'
                order: 216
    aerodrome-runway-lines-good:
        data: { source: osm, layer: [roads] }
        filter:
            all:
                - kind: minor_road
                - aeroway: [runway,taxiway]
            any:
                - landuse_kind: [aerodrome,runway,apron,military]
        draw:
            outline:
                style: lines
                order: 512
                color: '#b085d7'
                width: [[10, 1px], [11, 1.5px], [12, 2px], [13, 4px], [14, 8px], [15, 16px], [16, 32px], [17, 60m]]
                #extrude: function() { return feature.height || 20; }
        taxiway:
            filter:
                all:
                    - aeroway: taxiway
            draw:
                outline:
                    width: [[11, 0px], [12, 0.5px], [13, 1px], [14, 2px], [15, 4px], [16, 12px], [17, 20m]]
    aerodrome-runway-lines-bad:
        data: { source: osm, layer: [roads] }
        filter:
            all:
                - kind: minor_road
                - aeroway: [runway,taxiway]
            not:
                - landuse_kind: [aerodrome,runway,apron,military]
        draw:
            outline:
                style: lines
                order: 512
                color: [[12,'#e25288'],[13,'#e279a1']]
                cap: butt
                width: [[9, 3px], [11, 2px], [12, 2px], [13, 4px], [14, 8px], [15, 16px], [16, 32px], [17, 60m]]
                #extrude: function() { return feature.height || 20; }
        taxiway:
            filter:
                all:
                    - aeroway: taxiway
            draw:
                outline:
                    width: [[11, 0px], [12, 0.5px], [13, 1px], [14, 2px], [15, 4px], [16, 12px], [17, 20m]]

    aerodrome-buildings-good:
        data: { source: osm, layer: [buildings] }
        filter:
            any:
                - landuse_kind: [aerodrome]
        draw:
            polygons:
                color: '#bdadbf'
                order: 509
                #extrude: function() { return feature.height || 20; }
            outline:
                style: lines
                order: 510
                color: '#d534df'
                width: [[14,0.1px],[15,0.5px],[17,0.5px],[18,0.75px],[19,0.25m]]
                #extrude: function() { return feature.height || 20; }
    aerodrome-buildings-bad:
        data: { source: osm, layer: [buildings] }
        filter:
            any:
                - kind: [aerodrome]
            not:
                - landuse_kind: [aerodrome]
        draw:
            polygons:
                color: '#dd7a7a'
                order: 509
                #extrude: function() { return feature.height || 20; }
            outline:
                style: lines
                order: 510
                color: '#df9c34'
                width: [[14,0.1px],[15,0.5px],[16,1.25px],[17,2.0px],[18,2.5px],[19,2m]]
                #extrude: function() { return feature.height || 20; }

    # Map overlays for styling the server response (using special source layer names) for route line, find_me location gem, and search result pins
    route:
        data: { source: route }
        draw:
            ui-lines-overlay:
                color: '#06a6d4'
    mz_current_location_gem:
        visible: false
    current_location_gem:
        data: { source: find_me }
    mz_route_location:
        visible: false
    route_icon:
        data: { source: route_icon }
    mz_route_start:
        visible: false
    route_start:
        data: { source: route_start }
    mz_route_stop:
        visible: false
    route_stop:
        data: { source: route_stop }
    mz_search_result:
        visible: false
    search:
        data: { source: search }
    mz_dropped_pin:
        visible: false
    reverse_geocode:
        data: { source: reverse_geocode }
    mz_default_point:
        visible: false
    mz_default_line:
        visible: false
    mz_default_polygon:
        visible: false

    roads:
        draw:
            lines:
                outline:
                    #order: 21 # 15 is the starting aboveground level, plus 6 (this is false, with layer it can be as low as 4 or even negative!?)
    places:
        populated-places:
            populated-places-natural-earth-z3:
                z3places-1:
                    draw:
                        icons:
                            visible: true
                z3places-2:
                    draw:
                        icons:
                            visible: true
            populated-places-natural-earth-z5:
                z5places-3:
                    draw:
                        icons:
                            visible: true
            populated-places-osm-z8:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: true
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [8]
            populated-places-osm-z9-no-population:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: false
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [9]
                        - kind: [city,town]
            populated-places-osm-z10:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: true
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [10]
            populated-places-osm-z10-no-population:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: false
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [10]
                        - kind: [city,town]
            populated-places-osm-z11:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: true
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [11]
                        - kind: [city,town]
            populated-places-osm-z11-no-population:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: false
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [11]
                        - kind: [city,town]
            populated-places-osm-z12:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: true
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [12]
                        - kind: [city,town]
            populated-places-osm-z12-no-population:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: false
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [12]
                        - kind: [city,town]
            populated-places-osm-z13-z14:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: true
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [13,14]
                        - kind: [city,town]
            populated-places-osm-z13-z14-no-population:
                filter:
                    all:
                        - source: [openstreetmap]
                        - name: true
                        - population: false
                        - not: { kind: [country, county, state, island, neighbourhood, suburb, quarter] }
                        - $zoom: [13, 14]
                        - kind: [city,town]
            neighborhood-z11:
                filter:
                    all:
                        - name: true
                        - kind: [macrohood, neighbourhood]
                        - $zoom: [11]
                    any:
                        - source: [openstreetmap]
                        - source: [whosonfirst]
                          all:
                            - min_zoom: [11]
                            - max_zoom: { min: 12 }
                            - is_landuse_aoi: false
                            #- kind_tile_rank: { max: 6 }
            neighborhood-z12:
                filter:
                    all:
                        - name: true
                        - kind: [macrohood, neighbourhood]
                        - $zoom: [12]
                    any:
                        - source: [openstreetmap]
                        - source: [whosonfirst]
                          all:
                            - min_zoom: [11,12]
                            - max_zoom: { min: 13 }
                            - is_landuse_aoi: false
                            #- kind_tile_rank: { max: 8 }
            neighborhood-z13:
                filter:
                    all:
                        - name: true
                        - kind: [macrohood, neighbourhood]
                        - $zoom: [13]
                    any:
                        - source: [openstreetmap]
                        - source: [whosonfirst]
                          all:
                            - min_zoom: [11,12,13]
                            - max_zoom: { min: 14 }
                            - is_landuse_aoi: false
                            - kind_tile_rank: { max: 8 }
            neighborhood-z14:
                filter:
                    all:
                        - name: true
                        - kind: [macrohood, neighbourhood]
                        - $zoom: [14]
                    any:
                        - source: [openstreetmap]
                        - source: [whosonfirst]
                          all:
                            - min_zoom: [11,12,13,14]
                            - max_zoom: { min: 15 }
                            - is_landuse_aoi: false
                            - kind_tile_rank: { max: 8 }
            neighborhood-z15:
                filter:
                    all:
                        - name: true
                        - kind: [macrohood, neighbourhood]
                        - $zoom: [15]
                    any:
                        - source: [openstreetmap]
                        - source: [whosonfirst]
                          all:
                            - min_zoom: [11,12,13,14,15]
                            - max_zoom: { min: 16 }
                            - is_landuse_aoi: false
                            - kind_tile_rank: { max: 8 }
            neighborhood-z16:
                filter:
                    all:
                        - name: true
                        - kind: [macrohood, neighbourhood]
                        - $zoom: [16]
                    any:
                        - source: [openstreetmap]
                        - source: [whosonfirst]
                          all:
                            - min_zoom: [11,12,13,14,15,16]
                            - max_zoom: { min: 17 }
                            - is_landuse_aoi: false
                            - kind_tile_rank: { max: 8 }
    airport-gate:
        data: { source: osm, layer: [pois] }
        filter: { kind: gate, aeroway: gate }
        draw:
            text-blend-order:
                visible: true
